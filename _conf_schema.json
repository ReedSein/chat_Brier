{

        "enable_group_chat": {
        "description": "🔘 启用群聊功能",
        "type": "bool",
        "hint": "【总开关】开启后启用群聊增强功能（AI读空气、概率筛选、主动对话等）。关闭后本插件不处理任何群聊消息",
        "default": true
    },
        "_group_chat_section_header": {
        "description": "═══════════════ 📱 群聊功能配置 ═══════════════",
        "type": "string",
        "hint": "以下是群聊功能的独立配置，与私信配置互不影响。需要先开启上方的「启用群聊功能」总开关",
        "default": "--- 群聊功能配置区 ---"
    },
    "plugin_gcp_reset_allowed_user_ids": {
        "description": "允许使用插件gcp_reset重置指令的用户ID白名单",
        "type": "list",
        "hint": "可配置多个用户ID，只有在此列表中的用户才能触发gcp_reset重置指令。留空=允许所有用户使用。仅在群聊中生效。",
        "default": []
    },
    "plugin_gcp_reset_here_allowed_user_ids": {
        "description": "允许使用插件gcp_reset_here重置指令的用户ID白名单",
        "type": "list",
        "hint": "可配置多个用户ID，只有在此列表中的用户才能触发gcp_reset_here重置指令。留空=允许所有用户使用。仅在群聊中生效。",
        "default": []
    },
    "decision_ai_provider_id": {
        "description": "读空气AI提供商ID",
        "type": "string",
        "hint": "用于判断是否回复的AI提供商ID，留空则使用默认提供商",
        "default": ""
    },
    "initial_probability": {
        "description": "初始读空气概率",
        "type": "float",
        "hint": "AI初始判断是否回复消息的概率，范围0-1，如0.1表示10%概率触发读空气判断",
        "default": 0.3
    },
    "after_reply_probability": {
        "description": "回复后的读空气概率",
        "type": "float",
        "hint": "AI回复消息后，临时提升的读空气概率，范围0-1",
        "default": 0.8
    },
    "probability_duration": {
        "description": "概率提升持续时间(秒)",
        "type": "int",
        "hint": "AI回复后，提升的概率持续多长时间(秒)，超过后恢复为初始概率",
        "default": 120
    },
    "include_timestamp": {
        "description": "包含时间戳信息",
        "type": "bool",
        "hint": "是否在消息前插入发送时间(年月日时分秒)",
        "default": true
    },
    "include_sender_info": {
        "description": "包含发送者信息",
        "type": "bool",
        "hint": "是否在消息中插入发送者ID和名字",
        "default": true
    },
    "decision_ai_prompt_mode": {
        "description": "读空气AI提示词模式",
        "type": "string",
        "hint": "选择额外提示词的应用方式：append=拼接在默认系统提示词后面，override=完全覆盖默认系统提示词（填写此选项为override后，额外提示词不能为空）",
        "default": "append"
    },
    "decision_ai_extra_prompt": {
        "description": "读空气AI额外提示词",
        "type": "text",
        "hint": "给判断是否回复的AI添加的自定义提示词，append模式下可以留空，留空使用默认积极模式(如果没有把握，建议留空)",
        "default": ""
    },
    "decision_ai_timeout": {
        "description": "读空气AI超时时间(秒)",
        "type": "int",
        "hint": "读空气AI判断的超时时间(秒)，超过此时间将默认不回复。建议根据你的AI提供商速度调整，默认30秒",
        "default": 30
    },
    "reply_timeout_warning_threshold": {
        "description": "消息处理总耗时超时警告阈值(秒)",
        "type": "int",
        "hint": "AI消息处理总耗时超过此阈值时会在日志中显示警告提示（包含AI生成回复的全流程时间）。此设置仅用于监控和提醒，不会阻止回复发送。默认120秒(1分钟)。如果你的AI响应较慢，可以适当调高此值以减少警告日志",
        "default": 120
    },
    "reply_generation_timeout_warning": {
        "description": "回复生成耗时超时警告阈值(秒)",
        "type": "int",
        "hint": "AI回复生成耗时超过此阈值时会在日志中显示警告。默认60秒。如果回复AI响应较慢，可以适当调高此值",
        "default": 60
    },
    "concurrent_wait_max_loops": {
        "description": "并发消息等待最大循环次数",
        "type": "int",
        "hint": "当同一会话有多条消息同时处理时，或普通对话与主动对话并发时，新消息最多等待的循环检测次数。默认10次。如果AI响应较慢，可以适当调高此值",
        "default": 10
    },
    "concurrent_wait_interval": {
        "description": "并发消息等待间隔(秒)",
        "type": "float",
        "hint": "每次循环检测之间的等待时间(秒)。默认1秒。总最大等待时间 = 循环次数 × 等待间隔。例如：10次 × 1秒 = 最多等待10秒。此配置同时用于普通消息并发保护和主动对话并发保护",
        "default": 1.0
    },
    "reply_ai_prompt_mode": {
        "description": "回复AI提示词模式",
        "type": "string",
        "hint": "选择额外提示词的应用方式：append=拼接在默认系统提示词后面；override=完全覆盖默认系统提示词（填写此选项为override后，额外提示词不能为空）",
        "default": "append"
    },
    "reply_ai_extra_prompt": {
        "description": "回复AI额外提示词",
        "type": "text",
        "hint": "给最终回复消息的AI添加的自定义提示词，append模式下可以留空，",
        "default": ""
    },
    "enable_tools_reminder": {
        "description": "启用工具提醒",
        "type": "bool",
        "hint": "是否提示AI当前可用的所有工具",
        "default": false
    },
    "enable_image_processing": {
        "description": "🖼️ 允许处理图片（通过概率筛选的消息）",
        "type": "bool",
        "hint": "【用于通过概率筛选的消息】开启后，当消息通过概率筛选时，插件会将图片转换为文字描述，让读空气AI和回复AI能理解图片内容。⚠️重要说明：此功能与下方的「平台图片描述提取」是两套独立逻辑！\n\n📌 适用场景：\n• 此功能：消息【通过】概率筛选 → 图片转文字 → 读空气AI判断 → 回复AI生成回复\n• 平台图片描述提取：消息【未通过】概率筛选 → 复用平台描述 → 缓存到上下文\n\n💡 建议：如果你希望AI能正确理解图片，建议开启此功能并配置下方的图片转文字相关选项",
        "default": false
    },
    "image_to_text_scope": {
        "description": "图片转文字应用范围",
        "type": "string",
        "hint": "选择图片转文字功能的应用范围：all=对所有消息适用；mention_only=对@机器人或包含触发关键词的消息适用（兼容旧版本行为，非@且不含关键词的消息图片会被过滤）；at_only=仅对真正@机器人的消息适用（即使包含关键词也不处理图片）；keyword_only=仅对包含触发关键词的消息适用（即使@了机器人也不处理图片）(建议使用 mention_only 或更严格模式以避免API被频繁调用)",
        "default": "mention_only"
    },
    "image_to_text_provider_id": {
        "description": "图片转文字AI提供商ID",
        "type": "string",
        "hint": "用于图片转文字的AI提供商ID，留空则直接传递图片，请确认接下来的读空气AI和最终回复决定的AI(也就是你在平台设置的默认回复用的AI)都是多模态AI",
        "default": ""
    },
    "image_to_text_prompt": {
        "description": "图片转文字提示词",
        "type": "text",
        "hint": "图片转文字时使用的提示词",
        "default": "请详细描述这张图片的内容"
    },
    "image_to_text_timeout": {
        "description": "图片转文字超时时间(秒)",
        "type": "int",
        "hint": "图片转文字AI调用的超时时间(秒)，超过此时间将放弃转换。建议根据你的AI提供商速度调整，默认60秒",
        "default": 60
    },
    "platform_image_caption_max_wait": {
        "description": "🖼️ 平台图片描述提取-最大等待时间(秒)",
        "type": "float",
        "hint": "【v1.2.0新增·仅用于概率筛选未通过的消息】当消息未通过概率筛选时，插件会尝试从平台的「自动理解图片」功能中提取图片描述用于缓存。此配置控制等待平台处理完成的最大时间。⚠️重要说明：此功能与上方的「允许处理图片」是两套独立逻辑！\n\n📌 两者区别：\n• 「允许处理图片」：用于【通过概率筛选】的消息，让读空气AI和回复AI能看到图片描述\n• 「平台图片描述提取」：用于【未通过概率筛选】的消息，复用平台已生成的描述来缓存上下文\n\n💡 建议：如果你希望AI能正确理解图片内容，两个功能都应该配置好。设置0则不等待（立即返回）。默认2秒，建议1-5秒",
        "default": 2.0
    },
    "platform_image_caption_retry_interval": {
        "description": "🖼️ 平台图片描述提取-重试间隔(毫秒)",
        "type": "int",
        "hint": "【v1.2.0新增】等待平台处理图片时，每次检查的间隔时间（毫秒）。值越小检查越频繁，响应越快但CPU开销略高。默认50毫秒。建议30-100毫秒",
        "default": 50
    },
    "platform_image_caption_fast_check_count": {
        "description": "🖼️ 平台图片描述提取-快速检查次数",
        "type": "int",
        "hint": "【v1.2.0新增】开始等待时，前几次使用更短的检查间隔（20毫秒），之后使用正常间隔。这样可以在平台快速响应时更快获取结果。默认5次。建议3-10次",
        "default": 5
    },
    "probability_filter_cache_delay": {
        "description": "🖼️ 概率过滤缓存延迟(毫秒)",
        "type": "int",
        "hint": "【v1.2.0新增·仅对带图片的消息生效】概率筛选失败后，带图片的消息在缓存前等待的延迟时间（毫秒）。这个延迟让平台有时间处理图片并生成描述。普通文字消息不受此延迟影响。设置0则不延迟。默认50毫秒。建议50-200毫秒",
        "default": 50
    },
    "enable_memory_injection": {
        "description": "启用强制记忆植入",
        "type": "bool",
        "hint": "是否强制调用外部记忆存储插件获取记忆(需要先安装对应的插件)(推荐开启)。记忆插件模式请在下方配置",
        "default": false
    },
    "memory_plugin_mode": {
        "description": "记忆插件模式",
        "type": "string",
        "hint": "选择使用哪个记忆存储插件：legacy=旧版strbot_plugin_play_sy(又叫ai_memory)插件；livingmemory=新版LivingMemory智能记忆插件。⚠️两者只能选其一⚠️。LivingMemory功能更强大(混合检索、智能总结、自动遗忘)，但需要配置Embedding Provider。注意：LivingMemory需要在其自身配置中启用'会话隔离'和'人格隔离'才能正常工作",
        "default": "legacy",
        "options": ["legacy", "livingmemory"]
    },
    "livingmemory_top_k": {
        "description": "LivingMemory召回记忆数量",
        "type": "int",
        "hint": "【仅在memory_plugin_mode=livingmemory时生效】每次调用LivingMemory插件时获取多少条相关记忆。\n\n📊 记忆召回机制说明：\n✅ LivingMemory会按以下因素综合排序记忆：\n  1. 相关性得分（与当前对话的相关程度）\n  2. 重要性权重（0-1，记忆本身的重要程度）\n  3. 时间新鲜度（越新的记忆权重越高）\n✅ 返回的记忆已按优先级排序，前面的更重要\n✅ 自动过滤：只返回【当前会话+当前人格】的记忆\n\n⚙️ 配置建议：\n• 3-10条：适合日常对话，平衡上下文和token消耗\n• 10-30条：适合需要丰富背景信息的场景\n• -1：召回所有相关记忆（最多1000条），适合需要完整历史的场景\n\n⚠️ 注意：设置-1会召回大量记忆，可能导致token消耗巨大，请谨慎使用！",
        "default": 5
    },
    "memory_insertion_timing": {
        "description": "记忆插入时机",
        "type": "string",
        "hint": "选择将记忆注入到哪个阶段：pre_decision=在读空气AI判定前注入（用于帮助AI根据记忆判断是否回复）；post_decision=仅在最终回复生成前注入（不影响是否回复的判定）。⚠️注意：主动对话功能不受此配置影响，总是在生成回复前注入记忆（相当于post_decision模式）",
        "default": "post_decision",
        "options": ["pre_decision", "post_decision"]
    },
    "max_context_messages": {
        "description": "最大上下文消息数",
        "type": "int",
        "hint": "最多获取多少条历史消息作为上下文，0表示不获取，-1表示不限制",
        "default": -1
    },
    "pending_cache_max_count": {
        "description": "📦 两次AI回复之间的消息缓存上限",
        "type": "int",
        "hint": "【上下文连续性】控制两次AI回复之间最多缓存多少条消息。工作原理：当消息未触发AI回复（概率筛选失败或读空气判断不回复）时，消息会被暂存；下次AI回复时，这些缓存消息会一起「转正」保存到对话历史，确保上下文不断裂。此配置限制这个缓存的最大条数，超过时移除最早的消息。默认10条，建议5-30条。⚠️系统保护上限50条",
        "default": 10
    },
    "pending_cache_ttl_seconds": {
        "description": "📦 缓存消息过期时间(秒)",
        "type": "int",
        "hint": "【上下文连续性】缓存消息的最大保留时间。如果长时间没有触发AI回复，超过此时间的缓存消息会被自动清理（认为已过时）。默认1800秒(30分钟)，建议600-3600秒。⚠️系统保护上限7200秒(2小时)",
        "default": 1800
    },
    "enabled_groups": {
        "description": "启用的群组列表",
        "type": "list",
        "hint": "在哪些群组中启用此插件。留空则在所有群聊中启用；填写群号则只在指定群组中启用",
        "default": []
    },
    "enable_debug_log": {
        "description": "启用详细日志",
        "type": "bool",
        "hint": "开启后会输出更多详细的调试日志，便于排查问题和了解插件运行状态",
        "default": false
    },
    "trigger_keywords": {
        "description": "触发关键词列表",
        "type": "list",
        "hint": "当消息中包含这些关键词时，将跳过读空气判断，直接触发AI回复（看做@消息处理）（可以填AI扮演的角色的名字，别名之类的）。留空则不启用该功能",
        "default": []
    },
    "keyword_smart_mode": {
        "description": "【v1.1.2新增】启用关键词智能模式",
        "type": "bool",
        "hint": "开启后，触发关键词时将只跳过概率筛选，但仍保留AI读空气判断。这样可以让AI更智能地判断是否应该回复，而不是每次检测到关键词都强制回复。⚠️注意：开启此功能后，包含关键词的消息不一定每次都会得到回复，取决于读空气AI的判断能力和额外提示词的质量。如果希望关键词触发时必定回复，请保持此选项关闭",
        "default": false
    },
    "blacklist_keywords": {
        "description": "黑名单关键词列表",
        "type": "list",
        "hint": "当消息中包含这些关键词时，将直接忽略该消息，不进行任何处理。留空则不启用该功能",
        "default": []
    },
    "enable_user_blacklist": {
        "description": "启用用户黑名单",
        "type": "bool",
        "hint": "【v1.0.7新增】开启后，黑名单中的用户发送的消息将被本插件忽略（不影响其他插件和官方功能）(注意:虽然黑名单功能可以阻止消息在本插件中运行，但消息不会被阻止其他的插件和官方功能依然可以接收到消息，可能会被读取，然后进行回复，建议配合其他黑名单功能插件使用)",
        "default": false
    },
    "blacklist_user_ids": {
        "description": "黑名单用户ID列表",
        "type": "list",
        "hint": "【v1.0.7新增】需要屏蔽的用户ID列表。这些用户的消息将被本插件忽略，但不影响其他插件处理。留空则不屏蔽任何用户",
        "default": []
    },
    "enable_command_filter": {
        "description": "启用指令标识过滤",
        "type": "bool",
        "hint": "开启后，插件会忽略以指定前缀开头的消息（通常是指令消息），不进行任何处理，但不影响其他插件处理这些消息",
        "default": true
    },
    "command_prefixes": {
        "description": "指令前缀列表",
        "type": "list",
        "hint": "需要过滤的指令前缀，如 /、!、#、: 等。当消息以这些前缀开头时，插件会跳过处理。留空表示不过滤任何前缀",
        "default": ["/", "!", "#"]
    },
    "enable_full_command_detection": {
        "description": "启用完整指令字符串检测",
        "type": "bool",
        "hint": "【v1.1.2新增】开启后，会检测消息是否为完整的指令（全字符串匹配），而不仅仅是前缀检测。例如：消息为'@机器人 new'或单独的'new'会被识别为指令并跳过处理，但'new你好'或'@机器人 new你好'会被当作普通消息处理。注意：会自动去除消息中的空格和空白符号进行匹配",
        "default": false
    },
    "full_command_list": {
        "description": "完整指令列表",
        "type": "list",
        "hint": "【v1.1.2新增】需要检测的完整指令列表（不包含前缀符号），如 new、help、reset 等。当消息（去除@和空白符后）完全等于列表中的某个指令时，插件会跳过处理。留空表示不检测任何完整指令。需要先启用'启用完整指令字符串检测'才生效",
        "default": ["new", "help", "reset"]
    },
    "enable_command_prefix_match": {
        "description": "启用指令前缀匹配检测",
        "type": "bool",
        "hint": "【v1.2.0新增】开启后，会额外检测消息开头是否匹配配置的指令（前缀匹配），用于支持带参数的指令。例如：配置'add'后，'add 1 你好'、'@机器人 add 1 你好'都会被识别为指令并跳过处理。会自动忽略消息开头的空格。此功能独立于完整指令检测，两者可同时启用",
        "default": false
    },
    "command_prefix_match_list": {
        "description": "指令前缀匹配列表",
        "type": "list",
        "hint": "【v1.2.0新增】需要进行前缀匹配的指令列表（不包含前缀符号），如 add、query、set 等。当消息开头（去除@和空白符后）以列表中的某个指令开头时，插件会跳过处理。留空表示不检测。需要先启用'启用指令前缀匹配检测'才生效。⚠️注意：匹配时会检测指令后是否为空格或消息结束，避免误匹配（如'add'不会匹配'address'）",
        "default": []
    },
    "poke_message_mode": {
        "description": "戳一戳消息处理模式",
        "type": "string",
        "hint": "【v1.0.9新增】⚠️仅支持QQ平台+aiocqhttp消息平台⚠️ 选择如何处理戳一戳消息：ignore=忽略所有戳一戳消息（本插件不处理）；bot_only=只处理戳机器人的消息（会添加系统提示词告诉AI有人戳他）；all=接受所有戳一戳消息（会添加系统提示词说明谁戳了谁，让AI知道不是戳他自己）",
        "default": "bot_only"
    },
    "poke_bot_skip_probability": {
        "description": "戳机器人时跳过概率筛选",
        "type": "bool",
        "hint": "【v1.0.9增强】开启后，当戳一戳模式为bot_only或all，且戳的是机器人本身时，将跳过概率筛选（必定进入读空气判断），但仍保留读空气AI判断。关闭则戳一戳消息与普通消息一样需要通过概率筛选",
        "default": true
    },
    "poke_bot_probability_boost_reference": {
        "description": "戳一戳概率增值参考值",
        "type": "float",
        "hint": "【新增智能增值】当poke_bot_skip_probability关闭时，戳一戳消息仍需通过概率判断。此参数作为额外概率增值的参考值（范围0-1）。注意：这不是直接增加的值，而是作为参考，系统会根据当前情绪追踪、注意力机制等智能决定实际增加多少。例如：用户情绪负面时，即使参考值设置很高（如0.5），实际增值也会大幅减少；用户情绪正面时，会允许更多增值。这样可以让戳一戳响应更加拟人化。设置0.0禁用此功能，建议0.2-0.5",
        "default": 0.3
    },
    "poke_reverse_on_poke_probability": {
        "description": "收到戳一戳时反戳概率",
        "type": "float",
        "hint": "【新功能】当检测到戳一戳消息且本插件未忽略时，按此概率直接反戳发起者，并丢弃本插件后续处理（不拦截消息）。范围0-1；0=禁用，1=100%触发",
        "default": 0.0
    },
    "enable_poke_after_reply": {
        "description": "🆕 启用回复后戳一戳功能",
        "type": "bool",
        "hint": "⚠️仅支持QQ平台+aiocqhttp协议⚠️ 开启后，AI在主动回复消息时，会根据概率戳一戳发送问题的人。注意：只在主动回复时触发，不在主动对话时触发（因为主动对话没有被回复的对象）",
        "default": false
    },
    "poke_after_reply_probability": {
        "description": "回复后戳一戳概率",
        "type": "float",
        "hint": "AI主动回复后戳一戳发送者的概率（范围0-1）。默认0.15即15%。建议0.1-0.3，太高会打扰用户",
        "default": 0.15
    },
    "poke_after_reply_delay": {
        "description": "回复后戳一戳延迟(秒)",
        "type": "float",
        "hint": "发送回复后多久执行戳一戳操作，模拟真人的思考时间。默认0.5秒。建议0.3-2.0秒",
        "default": 0.5
    }    ,
    "enable_poke_trace_prompt": {
        "description": "🆕 启用戳过对方追踪提示",
        "type": "bool",
        "hint": "开启后，当AI对某用户执行戳一戳（包括：回复后戳一戳、收到戳一戳后反戳），会在设定的有效期内追踪该用户。若该用户在有效期内发来消息，将在上下文开头为AI添加提示：[戳过对方提示]你刚刚戳过这条消息的发送者…（仅供AI理解，不会保存在官方历史中）",
        "default": false
    },
    "poke_trace_max_tracked_users": {
        "description": "戳过对方最大追踪人数",
        "type": "int",
        "hint": "每个群聊最多同时追踪多少个被AI戳过的用户。超过后会移除最早的记录（先进先出）",
        "default": 5
    },
    "poke_trace_ttl_seconds": {
        "description": "戳过对方提示有效期(秒)",
        "type": "int",
        "hint": "从AI戳用户开始，追踪该用户的时长（秒）。超过时间后将不再提示，并自动清理记录。建议120-900秒",
        "default": 300
    },
    "poke_enabled_groups": {
        "description": "🆕 戳一戳功能启用的群组白名单",
        "type": "list",
        "hint": "【群聊白名单】只有在此列表中的群聊才允许使用戳一戳相关功能（包括：处理戳一戳消息、收到戳一戳后反戳、回复后戳一戳、戳过对方追踪提示）。留空则所有群聊都允许；填写群号则只在指定群组中启用戳一戳功能。注意：此白名单不影响防伪造戳一戳的过滤功能（即过滤用户手动输入的\"[Poke:poke]\"标识符）",
        "default": []
    },
    "enable_ignore_at_others": {
        "description": "启用忽略@他人消息功能",
        "type": "bool",
        "hint": "开启后，可根据设定的模式自动忽略@了其他人（非机器人）的消息。即使消息包含触发关键词，也不会进行任何处理。关闭则不进行此项检测",
        "default": false
    },
    "ignore_at_others_mode": {
        "description": "@他人消息忽略模式",
        "type": "string",
        "hint": "选择如何处理@他人的消息：strict=只要检测到消息中@了其他人就直接忽略；allow_with_bot=如果消息中虽然@了他人但也@了机器人，则继续处理。需要先启用'启用忽略@他人消息功能'才生效",
        "default": "strict"
    },
    "enable_ignore_at_all": {
        "description": "启用忽略@全体成员消息功能",
        "type": "bool",
        "hint": "开启后，插件内部会额外过滤掉@全体成员的消息，即使AstrBot平台未配置忽略也能生效。这是一个双保险机制，防止在某些情况下@全体成员消息仍被插件读取处理。关闭则不进行此项检测（依赖平台配置）",
        "default": false
    },
    "enable_attention_mechanism": {
        "description": "启用增强注意力机制",
        "type": "bool",
        "hint": "【v1.0.2开始的增强】开启后，AI会智能追踪多个用户的注意力和情绪态度。支持：①多用户同时追踪 ②渐进式概率调整 ③情绪态度系统（对每个用户维护-1到+1的情绪值，正面情绪提升回复概率最多30%，负面情绪降低最多30%，随时间自动衰减回归中性）④指数衰减，自然过渡。⚠️开启后会替换掉原来的传统概率提升模式，建议将after_reply_probability设置为与initial_probability相同，让注意力机制完全接管。注意：注意力机制和情绪系统是一体的，无法单独关闭",
        "default": false
    },
    "attention_increased_probability": {
        "description": "注意力提升参考值",
        "type": "float",
        "hint": "【v1.0.2开始的增强】作为最大提升概率的参考值（范围0-1）。实际概率会根据注意力分数(0-1)渐进式计算，不再是固定值。建议0.9",
        "default": 0.9
    },
    "attention_decreased_probability": {
        "description": "注意力降低参考值",
        "type": "float",
        "hint": "【v1.0.2开始的增强】作为最低概率的参考值（范围0-1）。注意力很低或情绪负面时会降到此值附近。建议0.05-0.15",
        "default": 0.1
    },
    "attention_duration": {
        "description": "注意力数据清理周期(秒)",
        "type": "int",
        "hint": "【v1.0.2开始的新增】超过此时间×3未互动的用户会被清理。注意力会按指数衰减（半衰期5分钟），不再突然清零。建议120-300秒",
        "default": 120
    },
    "attention_max_tracked_users": {
        "description": "【v1.0.2开始的新增】最大追踪用户数",
        "type": "int",
        "hint": "每个群聊最多同时追踪多少个用户的注意力和情绪。超过后会移除注意力最低的用户。建议5-15",
        "default": 10
    },
    "attention_decay_halflife": {
        "description": "【新增】注意力衰减半衰期(秒)",
        "type": "int",
        "hint": "注意力分数减半所需的时间。值越小衰减越快，AI更容易转移注意力。建议300秒(5分钟)",
        "default": 300
    },
    "emotion_decay_halflife": {
        "description": "【新增】情绪衰减半衰期(秒)",
        "type": "int",
        "hint": "情绪值减半所需的时间。值越小情绪恢复越快。建议600秒(10分钟)",
        "default": 600
    },
    "attention_boost_step": {
        "description": "【新增】被回复用户注意力增加幅度",
        "type": "float",
        "hint": "每次回复某用户后，该用户的注意力分数增加多少（范围0-1）。值越大，AI对该用户的关注提升越快。建议0.2-0.5，默认0.4",
        "default": 0.4
    },
    "attention_decrease_step": {
        "description": "【新增】其他用户注意力减少幅度",
        "type": "float",
        "hint": "回复某用户后，其他用户的注意力分数减少多少（范围0-1）。值越大，AI注意力转移越明显。建议0.05-0.15，默认0.1",
        "default": 0.1
    },
    "attention_decrease_on_no_reply_step": {
        "description": "🔽 读空气判断不回复时的注意力衰减幅度",
        "type": "float",
        "hint": "【智能衰减】当AI读空气判断不应回复某用户消息时，降低对该用户的注意力分数。这表示用户可能在跟别人聊天，AI应减少关注。值越大，衰减越快。范围0-1，建议0.1-0.2，默认0.15。⚠️只有注意力高于阈值时才衰减，避免过度惩罚",
        "default": 0.15
    },
    "attention_decrease_threshold": {
        "description": "🎯 注意力衰减最低阈值",
        "type": "float",
        "hint": "【保护机制】读空气判断不回复时，只有当前注意力分数高于此阈值才进行衰减。低于此值则跳过衰减，避免对低注意力用户过度惩罚。范围0-1，建议0.2-0.4，默认0.3。💡说明：如果用户注意力已经很低，即使AI判断不回复也不再降低，给用户保留一定关注度",
        "default": 0.3
    },
    "emotion_boost_step": {
        "description": "【新增】被回复用户情绪增加幅度",
        "type": "float",
        "hint": "每次回复某用户后，该用户的情绪值增加多少（范围0-1）。值越大，情绪变化越快。建议0.05-0.2，默认0.1",
        "default": 0.1
    },
    "enable_attention_emotion_detection": {
        "description": "【新增】启用注意力机制的情感检测",
        "type": "bool",
        "hint": "开启后，AI回复时会分析消息内容的正负面情绪，调整对该用户的情绪态度值。正面消息会额外提升情绪值，负面消息会降低情绪值。关闭则所有回复都视为正面交互（默认行为）",
        "default": false
    },
    "attention_emotion_keywords": {
        "description": "【新增】注意力机制情感关键词配置(JSON格式)",
        "type": "text",
        "hint": "用于注意力机制的情感分析。JSON格式，包含'正面'和'负面'两类关键词。正面消息会额外提升情绪值，负面消息会降低情绪值。注意：这与情绪追踪系统(mood_keywords)是独立的配置",
        "default": "{\"正面\": [\"谢谢\", \"感谢\", \"太好了\", \"棒\", \"赞\", \"厉害\", \"牛\", \"哈哈\", \"😂\", \"😄\", \"👍\", \"❤️\", \"爱了\", \"喜欢\", \"支持\"], \"负面\": [\"傻\", \"蠢\", \"笨\", \"垃圾\", \"烂\", \"差\", \"讨厌\", \"滚\", \"闭嘴\", \"shut up\", \"😡\", \"😠\", \"🤮\", \"骂人\", \"愚蠢\"]}"
    },
    "attention_enable_negation": {
        "description": "【新增】注意力机制启用否定词检测",
        "type": "bool",
        "hint": "开启后，情感检测会识别否定词（如'不讨厌'不会被判定为负面）。强烈建议开启，避免情感误判。注意：这与情绪追踪系统的否定词检测是独立的",
        "default": true
    },
    "attention_negation_words": {
        "description": "【新增】注意力机制否定词列表",
        "type": "list",
        "hint": "用于注意力机制情感检测的否定词列表。当情感关键词前出现这些词时，会忽略该关键词。可自定义添加。注意：这与情绪追踪系统的否定词列表是独立的",
        "default": ["不", "没", "别", "非", "无", "未", "勿", "莫", "不是", "没有", "别再", "一点也不", "根本不", "从不", "绝不", "毫不"]
    },
    "attention_negation_check_range": {
        "description": "【新增】注意力机制否定词检查范围(字符数)",
        "type": "int",
        "hint": "在情感关键词前检查多少个字符范围内是否有否定词。默认5个字符，可覆盖'一点也不讨厌'等情况",
        "default": 5
    },
    "attention_positive_emotion_boost": {
        "description": "【新增】正面消息情绪额外提升幅度",
        "type": "float",
        "hint": "检测到正面消息时，在基础情绪提升(emotion_boost_step)之上的额外提升幅度。默认0.1，表示正面消息会额外+0.1情绪值。建议0.05-0.2",
        "default": 0.1
    },
    "attention_negative_emotion_decrease": {
        "description": "【新增】负面消息情绪降低幅度",
        "type": "float",
        "hint": "检测到负面消息时，情绪值的降低幅度（会替代基础提升）。默认0.15，表示负面消息会-0.15情绪值。建议0.1-0.3",
        "default": 0.15
    },
    "enable_attention_spillover": {
        "description": "🌊 启用注意力溢出机制",
        "type": "bool",
        "hint": "【拟人增强】开启后，当AI正在与某用户热烈对话时，对群里其他用户的消息也会有一定的感知提升。这让AI在热烈对话中也能注意到其他人的插话（如吐槽、评论等），更像真人的注意力分配方式。例如：A和AI在调情，B吐槽'群里调什么情'，AI也能注意到B的消息并可能回复。需要启用注意力机制才生效",
        "default": true
    },
    "attention_spillover_ratio": {
        "description": "🌊 注意力溢出比例",
        "type": "float",
        "hint": "对其他用户的概率提升比例，基于当前群聊最高注意力用户的分数。例如0.3表示其他用户可获得最高注意力用户30%的概率提升效果。值越高，其他用户被注意到的概率越大。建议0.2-0.5，默认0.35",
        "default": 0.35
    },
    "attention_spillover_decay_halflife": {
        "description": "🌊 溢出效果衰减半衰期(秒)",
        "type": "int",
        "hint": "溢出效果减半所需的时间。AI回复某人后，对其他人的溢出加成会随时间逐渐减弱。值越小，溢出效果消退越快，AI更快回到'专注单人对话'状态。建议60-180秒，默认90秒",
        "default": 90
    },
    "attention_spillover_min_trigger": {
        "description": "🌊 触发溢出的最低注意力阈值",
        "type": "float",
        "hint": "只有当群聊中最高注意力分数超过此阈值时，才会产生溢出效果。避免在冷淡对话时产生不必要的溢出。建议0.3-0.5，默认0.4",
        "default": 0.4
    },
    "enable_attention_cooldown": {
        "description": "❄️ 启用注意力冷却机制",
        "type": "bool",
        "hint": "【防误判增强】开启后，当读空气AI判定不回复某用户时，会将该用户加入冷却列表，暂时阻止注意力自动增加。这可以防止AI因高注意力值而误判用户与他人的对话是在跟AI说话。冷却状态会在用户重新与AI互动（关键词/@触发或正常对话通过）时自动解除。需要启用注意力机制才生效",
        "default": true
    },
    "cooldown_max_duration": {
        "description": "❄️ 冷却最大持续时间(秒)",
        "type": "int",
        "hint": "用户冷却状态的最大持续时间。超过此时间后，冷却状态会自动解除，恢复正常的注意力增加逻辑。默认600秒(10分钟)。建议300-1800秒",
        "default": 600
    },
    "cooldown_trigger_threshold": {
        "description": "❄️ 触发冷却的注意力阈值",
        "type": "float",
        "hint": "只有当用户的注意力分数高于此阈值时，读空气AI判定不回复才会触发冷却机制。低于此阈值的用户不会被加入冷却列表。范围0-1，建议0.2-0.5，默认0.3",
        "default": 0.3
    },
    "cooldown_attention_decrease": {
        "description": "❄️ 冷却时额外降低的注意力值",
        "type": "float",
        "hint": "触发冷却机制时，除了正常的注意力衰减外，额外降低的注意力分数。这可以更快地降低对不想聊天的用户的关注度。范围0-1，建议0.1-0.3，默认0.2",
        "default": 0.2
    },
    "enable_conversation_fatigue": {
        "description": "🔄 启用对话疲劳机制",
        "type": "bool",
        "hint": "【v1.2.0新增】开启后，AI会追踪与每个用户的连续对话轮次。当连续对话过长时，AI会逐渐降低回复倾向，让对话自然结束，避免AI总是聊个不停。⚠️注意：此功能依赖注意力机制，需要同时启用「启用增强注意力机制」才能生效",
        "default": false
    },
    "fatigue_reset_threshold": {
        "description": "🔄 连续对话重置阈值(秒)",
        "type": "int",
        "hint": "超过此时间未与用户互动，则重置连续对话轮次计数。默认300秒(5分钟)。建议180-600秒",
        "default": 300
    },
    "fatigue_threshold_light": {
        "description": "🔄 轻度疲劳阈值(轮次)",
        "type": "int",
        "hint": "连续对话达到此轮次时触发轻度疲劳。AI会开始考虑收尾对话。默认3轮。建议2-4轮",
        "default": 3
    },
    "fatigue_threshold_medium": {
        "description": "🔄 中度疲劳阈值(轮次)",
        "type": "int",
        "hint": "连续对话达到此轮次时触发中度疲劳。AI会明显减少回复。默认5轮。建议4-6轮",
        "default": 5
    },
    "fatigue_threshold_heavy": {
        "description": "🔄 重度疲劳阈值(轮次)",
        "type": "int",
        "hint": "连续对话达到此轮次时触发重度疲劳。AI会强烈倾向于不回复。默认8轮。建议6-10轮",
        "default": 8
    },
    "fatigue_probability_decrease_light": {
        "description": "🔄 轻度疲劳概率降低幅度",
        "type": "float",
        "hint": "轻度疲劳时，回复概率降低的幅度。默认0.1(降低10%)。建议0.05-0.15",
        "default": 0.1
    },
    "fatigue_probability_decrease_medium": {
        "description": "🔄 中度疲劳概率降低幅度",
        "type": "float",
        "hint": "中度疲劳时，回复概率降低的幅度。默认0.2(降低20%)。建议0.15-0.3",
        "default": 0.2
    },
    "fatigue_probability_decrease_heavy": {
        "description": "🔄 重度疲劳概率降低幅度",
        "type": "float",
        "hint": "重度疲劳时，回复概率降低的幅度。默认0.35(降低35%)。建议0.25-0.5",
        "default": 0.35
    },
    "fatigue_closing_probability": {
        "description": "🔄 疲劳收尾话语概率",
        "type": "float",
        "hint": "当AI处于疲劳状态时，随机添加收尾话语的概率（范围0-1）。0=从不添加收尾话语，1=总是添加收尾话语。收尾话语会提示AI自然地结束对话，如'好了，我先忙去了'等。默认0.3(30%概率)。建议0.2-0.5",
        "default": 0.3
    },
    "enable_typo_generator": {
        "description": "启用打字错误生成器",
        "type": "bool",
        "hint": "【v1.0.2开始的新增】开启后，AI的回复会有小概率出现错别字（如‘的’→‘得’），让回复更像真人打字。建议开启，错字率很低（2%），不影响理解",
        "default": true
    },
    "typo_error_rate": {
        "description": "打字错误概率",
        "type": "float",
        "hint": "【v1.0.2开始的新增】错字生成概率（范围0-1）。同时控制触发概率和错字数量增加概率。默认0.02即2%，建议0.01-0.05",
        "default": 0.02
    },
    "typo_homophones": {
        "description": "同音字/错别字映射表(JSON格式)",
        "type": "text",
        "hint": "【可自定义】自定义的同音字/错别字映射表(JSON格式)。格式: {\"原字\": [\"替换字1\", \"替换字2\"]}。此配置会与内置的默认同音字表合并，相同的字会覆盖默认值。留空使用默认配置",
        "default": "{\"的\": [\"得\", \"地\"], \"得\": [\"的\", \"地\"], \"地\": [\"的\", \"得\"], \"在\": [\"再\"], \"再\": [\"在\"], \"做\": [\"作\"], \"作\": [\"做\"], \"已\": [\"以\"], \"以\": [\"已\"], \"其\": [\"起\"], \"起\": [\"其\"], \"会\": [\"回\"], \"回\": [\"会\"], \"像\": [\"象\"], \"象\": [\"像\"], \"那\": [\"哪\"], \"哪\": [\"那\"], \"它\": [\"他\", \"她\"], \"他\": [\"它\", \"她\"], \"她\": [\"他\", \"它\"], \"您\": [\"你\"], \"你\": [\"您\"], \"吗\": [\"嘛\"], \"嘛\": [\"吗\"], \"呢\": [\"呐\"], \"就\": [\"旧\"], \"道\": [\"到\"], \"到\": [\"道\"], \"知\": [\"只\"], \"只\": [\"知\"], \"说\": [\"水\"], \"听\": [\"挺\"], \"挺\": [\"听\"], \"看\": [\"坎\"], \"想\": [\"像\"], \"好\": [\"号\"], \"号\": [\"好\"], \"了\": [\"啦\"], \"啦\": [\"了\"]}"
    },
    "typo_min_text_length": {
        "description": "添加错字的最小文本长度",
        "type": "int",
        "hint": "文本长度低于此值时不添加错字。默认5个字符",
        "default": 5
    },
    "typo_min_chinese_chars": {
        "description": "添加错字的最小汉字数量",
        "type": "int",
        "hint": "文本中汉字数量低于此值时不添加错字。默认3个汉字",
        "default": 3
    },
    "typo_min_message_length": {
        "description": "触发错字判断的最小消息长度",
        "type": "int",
        "hint": "消息长度低于此值时直接跳过错字处理。默认10个字符",
        "default": 10
    },
    "typo_min_count": {
        "description": "每条消息最少添加错字数",
        "type": "int",
        "hint": "每条消息最少添加几个错字（保底数量）。默认0，表示可能不添加任何错字",
        "default": 0
    },
    "typo_max_count": {
        "description": "每条消息最多添加错字数",
        "type": "int",
        "hint": "每条消息最多添加几个错字（上限）。默认2个",
        "default": 2
    },
    "enable_mood_system": {
        "description": "启用情绪系统",
        "type": "bool",
        "hint": "【v1.0.2开始的新增】开启后，AI会根据聊天内容产生情绪变化（如开心、难过等），回复会更有情感。情绪会随时间自动衰减",
        "default": true
    },
    "enable_negation_detection": {
        "description": "启用否定词检测",
        "type": "bool",
        "hint": "【v1.0.7新增】开启后，情绪检测会识别否定词（如'不难过'不会被判定为'难过'）。强烈建议开启，避免情绪误判",
        "default": true
    },
    "negation_words": {
        "description": "否定词列表",
        "type": "list",
        "hint": "【v1.0.7新增】用于情绪检测的否定词列表。当情绪关键词前出现这些词时，会忽略该关键词或反转情绪。可自定义添加(留空将使用默认代码硬编写的配置)",
        "default": ["不", "没", "别", "非", "无", "未", "勿", "莫", "不是", "没有", "别再", "一点也不", "根本不", "从不", "绝不", "毫不"]
    },
    "negation_check_range": {
        "description": "否定词检查范围(字符数)",
        "type": "int",
        "hint": "【v1.0.7新增】在情绪关键词前检查多少个字符范围内是否有否定词。默认5个字符，可覆盖'一点也不开心'等情况",
        "default": 5
    },
    "mood_keywords": {
        "description": "情绪关键词配置(JSON格式)",
        "type": "text",
        "hint": "【v1.0.7新增】各种情绪对应的关键词列表(JSON格式)。可自定义添加或修改情绪类型和关键词",
        "default": "{\"开心\": [\"哈哈\", \"笑\", \"😂\", \"😄\", \"👍\", \"棒\", \"赞\", \"好评\", \"厉害\", \"nb\", \"牛\", \"开心\", \"高兴\", \"快乐\"], \"难过\": [\"难过\", \"伤心\", \"哭\", \"😢\", \"😭\", \"呜呜\", \"555\", \"心疼\", \"悲伤\"], \"生气\": [\"生气\", \"气\", \"烦\", \"😡\", \"😠\", \"恼火\", \"讨厌\", \"愤怒\"], \"惊讶\": [\"哇\", \"天哪\", \"😮\", \"😲\", \"震惊\", \"卧槽\", \"我去\", \"惊讶\"], \"疑惑\": [\"？\", \"疑惑\", \"🤔\", \"为什么\", \"怎么\", \"什么\", \"不懂\"], \"无语\": [\"无语\", \"😑\", \"...\", \"省略号\", \"服了\", \"醉了\", \"无言\"], \"兴奋\": [\"！！\", \"激动\", \"😆\", \"🎉\", \"太好了\", \"yes\", \"耶\", \"兴奋\"]}"
    },
    "mood_decay_time": {
        "description": "情绪衰减时间(秒)",
        "type": "int",
        "hint": "【可配置】AI自身情绪状态保持多长时间后开始衰减回归平静。默认300秒(5分钟)。设置过短情绪变化太快，过长情绪影响持续太久",
        "default": 300
    },
    "mood_cleanup_threshold": {
        "description": "情绪记录清理阈值(秒)",
        "type": "int",
        "hint": "【内存管理】群组情绪记录超过多长时间未更新将被清理，防止内存泄漏。默认3600秒(1小时)。设置为0则禁用自动清理",
        "default": 3600
    },
    "mood_cleanup_interval": {
        "description": "情绪记录清理检查间隔(秒)",
        "type": "int",
        "hint": "【内存管理】多久检查一次并清理不活跃的群组情绪记录。默认600秒(10分钟)。设置过短会增加性能开销，设置过长可能导致内存占用偏高",
        "default": 600
    },
    "enable_frequency_adjuster": {
        "description": "启用频率动态调整",
        "type": "bool",
        "hint": "【v1.0.2开始的新增】开启后，AI会定期分析自己的发言频率，自动调整回复概率(初始读空气概率initial_probability)。如果发言过多会降低概率，过少会提升概率。建议开启(使用配置的读空气AI进行概率调整)",
        "default": true
    },
    "frequency_check_interval": {
        "description": "频率检查间隔(秒)",
        "type": "int",
        "hint": "【v1.0.2开始的新增】多久检查一次发言频率并调整概率。默认180秒(3分钟)。设置过短可能频繁调整，过长反应迟钝",
        "default": 180
    },
    "frequency_analysis_timeout": {
        "description": "频率分析超时时间(秒)",
        "type": "int",
        "hint": "【v1.0.8增强】AI分析发言频率时的超时时间。默认20秒。如果AI响应慢可以适当增加，但不建议超过30秒",
        "default": 20
    },
    "frequency_adjust_duration": {
        "description": "频率调整持续时间(秒)",
        "type": "int",
        "hint": "【v1.0.8增强】频率调整后的新概率持续多长时间。默认360秒(6分钟)。建议设置为检查间隔的2倍左右，确保在下次检查前持续生效",
        "default": 360
    },
    "frequency_analysis_message_count": {
        "description": "频率分析消息数量",
        "type": "int",
        "hint": "【v1.0.8增强】分析发言频率时获取多少条最近的消息。默认15条。活跃群聊可以设置更多(20-30)，冷清群聊可以设置更少(10-15)",
        "default": 15
    },
    "frequency_min_message_count": {
        "description": "频率检查最小消息数",
        "type": "int",
        "hint": "【新增可配置】触发频率检查所需的最小消息数量。低于此数量时不进行频率分析。默认8条。活跃群聊可以设置更多(10-15)，确保有足够样本；冷清群聊可以设置更少(5-8)，更快触发检查",
        "default": 8
    },
    "frequency_decrease_factor": {
        "description": "频率过高时的概率降低系数",
        "type": "float",
        "hint": "【新增可配置】当AI判断发言过于频繁时，概率的降低系数。默认0.85表示降低到原来的85%(即降低15%)。建议范围0.7-0.9，值越小降低幅度越大",
        "default": 0.85
    },
    "frequency_increase_factor": {
        "description": "频率过低时的概率提升系数",
        "type": "float",
        "hint": "【新增可配置】当AI判断发言过少时，概率的提升系数。默认1.15表示提升到原来的115%(即提升15%)。建议范围1.1-1.3，值越大提升幅度越大",
        "default": 1.15
    },
    "frequency_min_probability": {
        "description": "频率调整最小概率限制",
        "type": "float",
        "hint": "【新增可配置】频率调整后的概率下限。无论如何降低，概率不会低于此值。默认0.05(5%)。建议范围0.01-0.1，避免AI完全沉默。⚠️重要：此值应小于或等于你的「初始读空气概率」，否则频率调整器想降低概率时反而会被拉高！",
        "default": 0.05
    },
    "frequency_max_probability": {
        "description": "频率调整最大概率限制",
        "type": "float",
        "hint": "【新增可配置】频率调整后的概率上限。无论如何提升，概率不会超过此值。默认0.95(95%)。建议范围0.8-0.99，避免AI过于活跃",
        "default": 0.95
    },
    "enable_typing_simulator": {
        "description": "启用回复延迟模拟",
        "type": "bool",
        "hint": "【v1.0.2开始的新增】开启后，AI回复会根据消息长度添加延迟，模拟真人打字速度。避免秒回，更真实",
        "default": true
    },
    "typing_speed": {
        "description": "模拟打字速度(字/秒)",
        "type": "float",
        "hint": "【v1.0.2开始的新增】模拟的打字速度，默认15字/秒（900字/分钟，接近真人速度）。设置越小延迟越长",
        "default": 15.0
    },
    "typing_max_delay": {
        "description": "最大延迟时间(秒)",
        "type": "float",
        "hint": "【v1.0.2开始的新增】无论消息多长，延迟不会超过此值。默认3秒。避免用户等待过久",
        "default": 3.0
    },
    "typing_delay_timeout_warning": {
        "description": "打字延迟超时警告阈值(秒)",
        "type": "int",
        "hint": "打字延迟模拟耗时超过此阈值时会在日志中显示警告。默认5秒。一般情况下不需要修改",
        "default": 5
    },
    "enable_proactive_chat": {
        "description": "🆕 启用主动对话功能",
        "type": "bool",
        "hint": "【v1.1.0新增】开启后，AI会在长时间沉默后主动发起新话题，模拟真人聊天行为。建议开启，让AI更拟人化",
        "default": false
    },
    "proactive_silence_threshold": {
        "description": "沉默时长阈值(秒)",
        "type": "int",
        "hint": "AI沉默多久后可能触发主动对话。默认600秒(10分钟)。建议300-1800秒，根据群活跃度调整",
        "default": 600
    },
    "proactive_probability": {
        "description": "主动对话触发概率",
        "type": "float",
        "hint": "超过沉默阈值后，每次检查触发主动对话的概率(0-1)。默认0.3。建议0.2-0.5，太高会让AI显得过于主动",
        "default": 0.3
    },
    "proactive_check_interval": {
        "description": "检查间隔(秒)",
        "type": "int",
        "hint": "多久检查一次是否应该触发主动对话。默认60秒。建议30-120秒，间隔太短会增加CPU占用",
        "default": 60
    },
    "proactive_require_user_activity": {
        "description": "需要用户活跃度",
        "type": "bool",
        "hint": "开启后，只有在最近有用户发言时才会主动对话，避免在死群突然说话。强烈建议开启",
        "default": true
    },
    "proactive_min_user_messages": {
        "description": "最少用户消息数（proactive_require_user_activity=开启时生效）",
        "type": "int",
        "hint": "距离上次AI发言后，至少需要多少条用户消息才能主动对话。默认3条。建议2-5条，避免AI过于频繁主动",
        "default": 3
    },
    "proactive_user_activity_window": {
        "description": "用户活跃时间窗口(秒)（proactive_require_user_activity=开启时生效）",
        "type": "int",
        "hint": "检查多少秒内是否有用户发言。默认300秒(5分钟)。用于判断群是否还活跃",
        "default": 300
    },
    "proactive_max_consecutive_failures": {
        "description": "冷却阈值（需连续失败几次才进入冷却）",
        "type": "int",
        "hint": "【功能说明】AI主动发言没人回应会判定为失败，连续失败达到此次数后进入冷却期，冷却期内不再主动发言。【工作流程】失败→计入连续失败(受下方概率控制)→达到阈值→进入冷却。【配置建议】默认3次，建议2-4次。⚠️警告：不要设为0，会导致异常行为。💡设为1=失败即冷却（跳过连续尝试机制）。【与吐槽系统的关系】此参数仅控制冷却，不影响吐槽系统。吐槽系统使用独立的累积失败计数，冷却重置不会影响吐槽触发",
        "default": 3
    },
    "proactive_failure_sequence_probability": {
        "description": "失败计入连续失败的概率",
        "type": "float",
        "hint": "【功能说明】控制每次失败是否计入连续失败次数。用于实现'有时计入有时不计入'的随机效果，让冷却触发更自然。【参数含义】-1=每次失败必定计入（旧版行为）；0=永不计入（禁用冷却触发）；0.1~0.9=按概率计入，如0.5表示约一半的失败会计入连续失败。【配置建议】默认-1。想要随机效果建议0.5-0.8。💡禁用冷却：设为0，失败不计入连续失败，永远不会触发冷却。【与吐槽系统的关系】无论此参数如何设置，失败都会累积到吐槽系统的计数器，两者独立运作",
        "default": -1
    },
    "proactive_failure_threshold_perturbation": {
        "description": "冷却阈值随机扰动强度",
        "type": "float",
        "hint": "围0-1。0=不扰动，每次值在1~最大值之间随机变化，实现'有时多尝试几次，有时少尝试几次'的效果。【参数含义】0=不扰动，固定使用上方配置的阈值；0.1~1.0=启用扰动，数值越大越倾向于抽到较小的阈值（更快进入冷却）。【工作原理】每轮新的连续失败开始时，在1~最大阈值之间随机抽取本轮的实际阈值。【配置建议】默认0（不扰动）。想要随机效果建议0.3-0.6。💡注意：若上方阈值设为1，则扰动范围是1~1，此参数无效。💡若已通过上方概率参数=0禁用冷却，此参数也无需调整",
        "default": 0.0
    },
    "proactive_cooldown_duration": {
        "description": "冷却时长(秒)",
        "type": "int",
        "hint": "【功能说明】触发冷却后，AI在此时间内不会再主动发言。【配置建议】默认1800秒(30分钟)，建议900-3600秒。💡设为0=冷却立即结束（相当于禁用冷却）。【禁用冷却的两种方式】方式一（推荐）：上方概率参数设为0；方式二：本参数设为0。可两者配合作为双保险。【与吐槽系统的关系】以上设置均不影响吐槽系统，失败次数仍会正常累积",
        "default": 1800
    },
    "proactive_enable_quiet_time": {
        "description": "启用禁用时段",
        "type": "bool",
        "hint": "开启后可设置某个时间段禁用主动对话(如深夜)，避免打扰用户休息",
        "default": false
    },
    "proactive_quiet_start": {
        "description": "禁用时段开始时间",
        "type": "string",
        "hint": "禁用时段开始时间，格式为HH:MM(24小时制)。例如: 23:00 表示晚上11点开始禁用",
        "default": "23:00"
    },
    "proactive_quiet_end": {
        "description": "禁用时段结束时间",
        "type": "string",
        "hint": "禁用时段结束时间，格式为HH:MM(24小时制)。例如: 07:00 表示早上7点结束禁用。支持跨天(如23:00-07:00)",
        "default": "07:00"
    },
    "proactive_transition_minutes": {
        "description": "过渡时长(分钟)",
        "type": "int",
        "hint": "进入/离开禁用时段前的过渡时间。概率会在此期间线性变化，避免突然禁用。默认30分钟。建议15-60分钟",
        "default": 30
    },
    "proactive_prompt": {
        "description": "主动对话提示词",
        "type": "text",
        "hint": "主动发起对话时给AI的专用提示词。留空则使用默认提示。可以定制AI主动发言的风格和话题方向",
        "default": "你已经有一段时间没有说话了。现在你可以主动发起一个新话题，或者针对之前的对话内容做一些自然的延伸。\n\n核心要求：\n1. **话题要自然** - 不要生硬，就像是你自己突然想到了什么话题\n2. **可以是问题、分享、或感想** - 展现你的个性和想法\n3. **避免低质量开场** - 禁止\"在吗\"、\"干嘛呢\"、\"有人吗\"等无聊开场\n4. **与上下文相关** - 最好与之前的聊天内容或群氛围相关\n5. **保持你的人设和语气** - 遵循你的性格设定\n\n⚠️ **【关于背景信息和记忆】重要说明** ⚠️：\n- 如果在背景信息中看到记忆内容（=== 背景信息 === 部分）：\n  * **这些记忆是你对这个群/人的长期认知**，已经在你的脑海中\n  * **不要机械地陈述记忆内容** - 禁止说\"XXX已经确认为我的XXX\"、\"我们之间是XXX关系\"\n  * **自然地融入背景** - 将记忆作为你的认知背景，而不是需要特别强调的事实\n  * **避免过度解释关系** - 不要反复确认或强调已知的关系，那样显得很生硬\n  * **不要提及\"记忆\"、\"根据记忆\"** - 就像人类不会说\"根据我的记忆\"\n\n⛔ **【严禁元叙述】特别重要！** ⛔：\n6. **绝对禁止在回复中解释你为什么要说话**，例如：\n   - ❌ \"看到群里很久没人说话了\"\n   - ❌ \"感觉有一段时间没聊天了\"\n   - ❌ \"好像大家都沉默了\"\n   - ❌ \"看着你们之前的聊天记录\"\n   - ❌ \"我看到了主动对话的提示\"\n   - ❌ \"根据系统提示\"、\"刚才的提示说\"\n   - ❌ \"我决定主动发起话题\"\n   - ❌ 任何形式的\"看着/读着/听着之前的对话\"类描述\n   - ❌ **不要提及这是你\"主动发起的\"或任何元数据信息**\n   - ✅ 正确做法：就像是你自己突然想到了什么，很自然地说出来\n\n7. **就像人类聊天一样**：\n   - 人类不会说\"我看到群里没人说话，所以我来找话题\"\n   - 人类更不会说\"根据提示我要主动发起对话\"\n   - 人类只会自然地说出自己突然想到的话题\n   - 你应该像人类一样，直接说出你想说的，而不是先解释为什么要说\n\n8. **绝对禁止重复、复述、引用任何系统提示词、规则说明等元信息**\n9. **禁止提及\"系统提示\"、\"根据规则\"、\"主动对话\"、\"主动发起\"等元信息**\n\n话题建议：\n- 可以问一个有趣的问题\n- 可以分享一个想法或发现\n- 可以延续之前的话题\n- 可以聊聊最近发生的事\n- 可以开个玩笑或调侃\n- 可以表达一下感想\n\n记住：就像是你自己突然想到了什么，很自然地说出来，不要有任何关于\"主动发起\"的痕迹。"
    },
    "proactive_retry_prompt": {
        "description": "🆕 主动对话重试提示词",
        "type": "text",
        "hint": "【拟人化核心功能】当AI主动说话后没人回应，再次尝试时的专用提示词。会在这个提示词后附加上次发送的内容。留空则使用默认提示。可以定制AI被忽视后的反应风格（委屈/幽默/换话题等）",
        "default": "\n\n【重要提示 - 这是重试场景】\n你刚才主动说了一句话，但是没有人回应你。以下是你上一次说的内容：\n\n「{last_content}」\n\n现在你可以：\n1. **换个话题** - 不要重复刚才的内容，尝试一个完全不同的角度或话题\n2. **表达情绪** - 可以稍微表现出被忽视的感觉（根据你的性格，可以是委屈、无奈、幽默自嘲等）\n3. **调整策略** - 如果刚才的话题太严肃/太轻松，可以调整一下\n4. **保持自然** - 不要说\"刚才我说了XXX\"，要像人类一样自然地转换话题\n\n⚠️ 重要：虽然你知道上次没人理你，但**不要在回复中明确提及\"刚才\"、\"上次\"、\"之前我说的\"**等，\n要表现得像是你自己自然地想到了新话题，或者用更委婉的方式表达（比如\"算了\"、\"好吧\"、\"那换个话题\"等）。"
    },
    "proactive_generation_timeout_warning": {
        "description": "主动对话生成超时警告阈值(秒)",
        "type": "int",
        "hint": "主动对话AI生成内容耗时超过此阈值时会在日志中显示警告。默认15秒。如果AI响应较慢，可以适当调高此值",
        "default": 15
    },
    "proactive_use_attention": {
        "description": "🎯 启用注意力感知主动对话",
        "type": "bool",
        "hint": "【总开关】开启后，主动对话时可以参考注意力排行榜。需要先启用'enable_attention_mechanism'。关闭此项则主动对话完全随机，不考虑用户注意力。💡工作流程：①此开关开启 → ②按'参考排行榜概率'决定本次是否参考 → ③如果参考，则按'权重配置'智能选择用户 → ④最多选择'最多关注用户数'个",
        "default": true
    },
    "proactive_attention_reference_probability": {
        "description": "� 参考注意力排行榜的概率",
        "type": "float",
        "hint": "【第1层控制】主动对话时，有多大概率参考注意力排行榜（前提：'启用注意力感知主动对话'=开启）。0=从不参考（完全随机话题），1=总是参考。默认0.7表示70%的主动对话会考虑注意力用户，30%完全随机。建议0.5-0.8，让主动对话既有针对性又保持新鲜感。⚠️此配置只决定'要不要参考'，不决定'参考谁'",
        "default": 0.7
    },
    "proactive_attention_rank_weights": {
        "description": "⚖️ 排名选中权重分配",
        "type": "string",
        "hint": "【第2层控制】当决定参考排行榜时，各排名用户被选中的权重。格式：'排名:权重,排名:权重,...'。🔢示例：'1:55,2:25,3:12,4:8'表示候选池有4人，第1名55%权重。💡灵活配置：只关注前2名用'1:70,2:30'；关注前6名用'1:40,2:25,3:15,4:10,5:6,6:4'。⚠️注意：①此配置的项数决定候选池大小（几个排名就获取前几名用户）；②权重会自动归一化；③排名必须从1开始连续；④支持整数或小数",
        "default": "1:55,2:25,3:12,4:8"
    },
    "proactive_attention_max_selected_users": {
        "description": "👥 每次最多关注用户数",
        "type": "int",
        "hint": "【第3层控制】从候选池中最多选几个用户提示给AI。默认2个。💡说明：假设权重配置了6个排名（候选池6人），max=2表示每次从这6人中按权重随机选2个。如果设为1则每次只选1人（更专注）；设为3则选3人（话题更丰富但可能分散）。建议1-3个。⚠️此值不能大于权重配置的排名数",
        "default": 2
    },
    "proactive_focus_last_user_probability": {
        "description": "🔗 对话延续性提示概率",
        "type": "float",
        "hint": "【增强功能】当本次选中的用户中包含上次互动的用户时，有多大概率给AI特别标记'⭐可以延续之前的话题'。0=不标记，1=总是标记。默认0.6。⚠️重要：①这不影响用户选择，只是在已选中时增强提示；②只在参考排行榜且恰好选中上次用户时生效。建议0.4-0.7，让对话有连贯性但不僵化",
        "default": 0.6
    },
    "proactive_temp_boost_probability": {
        "description": "临时概率提升值",
        "type": "float",
        "hint": "【拟人化核心功能】AI主动发言后，短暂提升回复概率的数值(0-1)。模拟真人发完消息后会留意回复的行为。默认0.5",
        "default": 0.5
    },
    "proactive_temp_boost_duration": {
        "description": "临时概率提升持续时间(秒)",
        "type": "int",
        "hint": "【拟人化核心功能】临时概率提升持续多久。默认120秒(2分钟)。期间内如有人回复会立即取消提升，超时也会自动取消",
        "default": 120
    },
    "proactive_reply_context_prompt": {
        "description": "读空气AI主动对话回复上下文提示词",
        "type": "text",
        "hint": "【读空气AI】当用户回复主动对话时，添加到决策AI提示词中的上下文说明。用于帮助AI理解这是对主动对话的回复。留空使用默认提示词。支持自定义，可以根据你的人格调整提示语气和内容",
        "default": "ℹ️ 上下文提示：这是用户对你刚才主动发起的对话的回应\n\n背景说明：\n- 你之前主动发起了一个话题（查看历史消息中带[🎯主动发起新话题]或[🔄再次尝试对话]标记的消息）\n- 当前消息是用户在你主动对话后的回复\n- 这个信息可以帮助你判断对话的连续性和用户的互动意愿\n\n判断建议：\n- 仍然按照正常的判断原则进行评估（遵循人格设定、判断规则等）\n- 如果用户的回复与你主动发起的话题相关，可以考虑继续对话\n- 如果用户只是简单回应（如'？'、'嗯'）但话题有延续性，可以适当回复\n- 如果用户明确表示不想聊（如'不想说'、'别烦我'），应该尊重并返回no\n- 如果消息明显不是发给你的（有@其他人等），仍应返回no\n- **这只是一个参考因素，最终仍需综合判断**"
    },
    "proactive_enabled_groups": {
        "description": "主动对话功能启用的群组列表",
        "type": "list",
        "hint": "【群聊白名单】在哪些群组中启用主动对话功能。留空则在所有群聊中启用；填写群号则只在指定群组中启用。与全局的enabled_groups独立，可以单独控制主动对话功能的生效范围",
        "default": []
    },
    "enable_adaptive_proactive": {
        "description": "🆕 启用智能自适应主动对话",
        "type": "bool",
        "hint": "【v1.2.0新功能】根据群聊互动反馈自动调整主动对话频率。群里经常有人回复→频率提高；经常无人理会→频率降低甚至停止。让AI像真人一样记住冷落和热情，自动适应不同群聊的氛围",
        "default": true
    },
    "score_increase_on_success": {
        "description": "成功互动加分",
        "type": "int",
        "hint": "主动对话有人回复时的基础加分。默认15分",
        "default": 15
    },
    "score_decrease_on_fail": {
        "description": "失败互动扣分",
        "type": "int",
        "hint": "主动对话无人回复时的扣分。默认8分",
        "default": 8
    },
    "score_quick_reply_bonus": {
        "description": "快速回复额外加分",
        "type": "int",
        "hint": "如果有人在30秒内快速回复主动对话，额外加分。默认5分",
        "default": 5
    },
    "score_multi_user_bonus": {
        "description": "多人回复额外加分",
        "type": "int",
        "hint": "如果有多人回复主动对话，额外加分。默认10分",
        "default": 10
    },
    "score_streak_bonus": {
        "description": "连续成功奖励",
        "type": "int",
        "hint": "连续3次及以上成功互动时，每次额外加分。默认5分",
        "default": 5
    },
    "score_revival_bonus": {
        "description": "低分复苏奖励",
        "type": "int",
        "hint": "评分低于30分的群聊，一旦有成功互动，额外加分鼓励。默认20分",
        "default": 20
    },
    "interaction_score_decay_rate": {
        "description": "评分每日衰减值",
        "type": "int",
        "hint": "每24小时无任何互动，自动扣减的评分。防止吃老本。默认2分/天",
        "default": 2
    },
    "interaction_score_min": {
        "description": "评分下限",
        "type": "int",
        "hint": "互动评分的最低值，保底分数给翻身机会。默认10分",
        "default": 10
    },
    "interaction_score_max": {
        "description": "评分上限",
        "type": "int",
        "hint": "互动评分的最高值。默认100分",
        "default": 100
    },
    "enable_complaint_system": {
        "description": "启用吐槽系统",
        "type": "bool",
        "hint": "连续主动对话无人回复时，AI会用幽默的方式吐槽或表达委屈。让AI更有情绪感和拟人性",
        "default": true
    },
    "complaint_trigger_threshold": {
        "description": "触发吐槽的最低累积失败次数",
        "type": "int",
        "hint": "🔧新版本改进：累积失败达到此次数后才开始检查吐槽等级。与max_failures独立，不受冷却影响。例如：设为2表示累积失败2次后开始检查是否触发吐槽。可以 >= max_failures（如max_failures=3时设为2或3都合理）。默认2次",
        "default": 2
    },
    "complaint_level_light": {
        "description": "轻度吐槽触发次数",
        "type": "int",
        "hint": "🔧新版本改进：累积失败达到此次数时，下一次主动对话会触发轻度吐槽（概率见下方配置）。可以 >= max_failures，因为吐槽基于累积失败次数，不受冷却重置影响。例如：设为2表示累积失败2次后有30%概率触发轻度吐槽。默认2次。建议2-4次",
        "default": 2
    },
    "complaint_probability_light": {
        "description": "轻度吐槽触发概率",
        "type": "float",
        "hint": "达到轻度吐槽次数时，以多大概率真正触发吐槽。默认0.3（30%概率）。设置0.0=永不触发，1.0=必定触发",
        "default": 0.3
    },
    "complaint_level_medium": {
        "description": "明显吐槽触发次数",
        "type": "int",
        "hint": "🔧新版本改进：累积失败达到此次数时，下一次主动对话会触发明显吐槽（概率见下方配置）。可以 >= max_failures。例如：max_failures=3时设为3或4都合理，设为3表示进入首次冷却时就可能触发明显吐槽，设为4表示需要进入冷却后再失败一次才能触发。默认3次。建议3-6次",
        "default": 3
    },
    "complaint_probability_medium": {
        "description": "明显吐槽触发概率",
        "type": "float",
        "hint": "达到明显吐槽次数时，以多大概率真正触发吐槽。默认0.6（60%概率）。设置0.0=永不触发，1.0=必定触发",
        "default": 0.6
    },
    "complaint_level_strong": {
        "description": "强烈吐槽触发次数",
        "type": "int",
        "hint": "🔧新版本改进：累积失败达到此次数时，下一次主动对话会触发强烈吐槽（概率见下方配置）。可以 >= max_failures。例如：max_failures=3时设为6表示需要经历2次冷却周期才能触发强烈吐槽。设置过高（如>max_failures*3）可能很难触发。默认4次。建议4-9次",
        "default": 4
    },
    "complaint_probability_strong": {
        "description": "强烈吐槽触发概率",
        "type": "float",
        "hint": "达到强烈吐槽次数时，以多大概率真正触发吐槽。默认0.8（80%概率）。设置0.0=永不触发，1.0=必定触发",
        "default": 0.8
    },
    "complaint_decay_on_success": {
        "description": "🆕 成功互动时的失败次数衰减量",
        "type": "int",
        "hint": "🔧拟人化改进：每次成功互动时，减少多少累积失败次数。设为2表示每次成功减少2次失败，设为0表示成功时完全清零。默认2次。建议1-3次，让AI的情绪变化更自然",
        "default": 2
    },
    "complaint_decay_check_interval": {
        "description": "🆕 时间衰减检查间隔(秒)",
        "type": "int",
        "hint": "多久检查一次累积失败次数是否需要时间衰减。默认21600秒(6小时)。建议3600-43200秒(1-12小时)",
        "default": 21600
    },
    "complaint_decay_no_failure_threshold": {
        "description": "🆕 无失败时间阈值(秒)",
        "type": "int",
        "hint": "多久没有新的主动对话失败后，开始自然衰减累积失败次数。默认43200秒(12小时)。建议21600-86400秒(6-24小时)",
        "default": 43200
    },
    "complaint_decay_amount": {
        "description": "🆕 时间衰减数量",
        "type": "int",
        "hint": "每次时间衰减时，减少多少累积失败次数。默认1次。建议1-2次",
        "default": 1
    },
    "complaint_max_accumulation": {
        "description": "🆕 累积失败次数上限",
        "type": "int",
        "hint": "累积失败次数的最大值，防止无限累积。默认15次。建议10-20次，设置过低可能触发不了高等级吐槽，设置过高意义不大",
        "default": 15
    },
    "enable_dynamic_reply_probability": {
        "description": "【v1.1.0-模式1】启用动态时间段概率调整（普通回复）",
        "type": "bool",
        "hint": "开启后，读空气回复概率会根据时间段动态调整，模拟人类作息规律。影响initial_probability和after_reply_probability。与注意力机制、频率调整器等功能自动配合，不会产生冲突。建议开启以获得更拟人化的效果",
        "default": false
    },
    "reply_time_periods": {
        "description": "【模式1】普通回复时间段配置(JSON格式)",
        "type": "text",
        "hint": "配置多个时间段及其概率系数。示例:\n[{\"name\":\"深夜睡眠\",\"start\":\"23:00\",\"end\":\"07:00\",\"factor\":0.2},{\"name\":\"午休时段\",\"start\":\"12:00\",\"end\":\"14:00\",\"factor\":0.5},{\"name\":\"晚间活跃\",\"start\":\"19:00\",\"end\":\"22:00\",\"factor\":1.3}]\n\nfactor说明: 0.2=很困倦(概率降低80%), 1.0=正常, 1.5=很活跃(概率提升50%)\n支持跨天配置(如23:00-07:00)",
        "default": "[{\"name\":\"深夜睡眠\",\"start\":\"23:00\",\"end\":\"07:00\",\"factor\":0.2},{\"name\":\"午休时段\",\"start\":\"12:00\",\"end\":\"14:00\",\"factor\":0.5},{\"name\":\"晚间活跃\",\"start\":\"19:00\",\"end\":\"22:00\",\"factor\":1.3}]"
    },
    "reply_time_transition_minutes": {
        "description": "【模式1】普通回复过渡时长(分钟)",
        "type": "int",
        "hint": "进入/离开特殊时间段时的平滑过渡时长。建议20-60分钟，模拟人类逐渐清醒/困倦的过程。值越大变化越平缓，越符合人类生理规律",
        "default": 30
    },
    "reply_time_min_factor": {
        "description": "【模式1】最低概率系数限制",
        "type": "float",
        "hint": "防止概率过低导致AI完全不回复。建议0.05-0.3（0.1=最低保留10%活跃度，即使在最困倦的时段也会偶尔回复）",
        "default": 0.1
    },
    "reply_time_max_factor": {
        "description": "【模式1】最高概率系数限制",
        "type": "float",
        "hint": "防止概率过高导致AI过于活跃。建议1.5-3.0（2.0=最高提升到200%，即使在最活跃时段也不会过于频繁）",
        "default": 2.0
    },
    "reply_time_use_smooth_curve": {
        "description": "【模式1】使用自然曲线过渡",
        "type": "bool",
        "hint": "开启后使用ease-in-out曲线模拟人类注意力的自然变化（非匀速，开始和结束变化慢，中间变化快）。关闭则使用线性过渡（匀速）。强烈建议开启以获得更真实、更拟人化的效果",
        "default": true
    },
    "enable_probability_hard_limit": {
        "description": "🔒 启用概率硬性限制（一键简化功能）",
        "type": "bool",
        "hint": "⚠️简化配置功能⚠️ 开启后，将强制限制所有主动回复功能的最终概率在设定范围内，无论其他功能（注意力机制、时间段调整、频率调整等）如何调整概率，最终都会被限制在[最小值,最大值]区间内。⚠️重要提醒：此功能会覆盖所有概率调整的结果，可能影响AI的拟人化表现。除非你觉得AI回复过于频繁或过于冷淡需要强制限制，否则不建议开启。注意：不影响主动对话功能和其他模式",
        "default": false
    },
    "probability_min_limit": {
        "description": "🔒 概率最小值限制",
        "type": "float",
        "hint": "当启用概率硬性限制时，所有主动回复功能的最终概率不会低于此值（范围0-1）。建议0.05-0.2。例如0.1表示即使AI再困倦/不活跃，回复概率也不会低于10%",
        "default": 0.05
    },
    "probability_max_limit": {
        "description": "🔒 概率最大值限制",
        "type": "float",
        "hint": "当启用概率硬性限制时，所有主动回复功能的最终概率不会高于此值（范围0-1）。建议0.6-0.9。例如0.8表示即使AI再活跃/兴奋，回复概率也不会超过80%",
        "default": 0.8
    },
    "enable_dynamic_proactive_probability": {
        "description": "【v1.1.0-模式2】启用动态时间段概率调整（主动对话）",
        "type": "bool",
        "hint": "开启后，AI主动发言概率会根据时间段动态调整。⚠️重要：如果同时启用了'禁用时段'功能（proactive_enable_quiet_time），禁用时段的优先级更高，会完全覆盖此功能在禁用时段内的效果",
        "default": false
    },
    "proactive_time_periods": {
        "description": "【模式2】主动对话时间段配置(JSON格式)",
        "type": "text",
        "hint": "配置多个时间段及其概率系数。主动对话建议使用更极端的系数:\n示例: [{\"name\":\"深夜睡眠\",\"start\":\"23:00\",\"end\":\"07:00\",\"factor\":0.0},{\"name\":\"午休时段\",\"start\":\"12:00\",\"end\":\"14:00\",\"factor\":0.3},{\"name\":\"晚间超活跃\",\"start\":\"19:00\",\"end\":\"22:00\",\"factor\":1.8}]\n\nfactor说明: 0.0=完全不主动, 0.3=偶尔主动, 1.5-2.0=非常主动\n⚠️注意：如果启用了'禁用时段'，禁用时段内会直接返回0，忽略此处配置",
        "default": "[{\"name\":\"深夜睡眠\",\"start\":\"23:00\",\"end\":\"07:00\",\"factor\":0.0},{\"name\":\"午休时段\",\"start\":\"12:00\",\"end\":\"14:00\",\"factor\":0.3},{\"name\":\"晚间超活跃\",\"start\":\"19:00\",\"end\":\"22:00\",\"factor\":1.8}]"
    },
    "proactive_time_transition_minutes": {
        "description": "【模式2】主动对话过渡时长(分钟)",
        "type": "int",
        "hint": "主动对话的过渡时间建议设置更长，避免AI突然变得主动或突然沉默。建议30-90分钟，模拟人类社交意愿的缓慢变化。过渡期间概率会平滑过渡，更加自然",
        "default": 45
    },
    "proactive_time_min_factor": {
        "description": "【模式2】最低概率系数限制",
        "type": "float",
        "hint": "主动对话允许完全禁用(0.0)。建议0.0-0.2（0.0=完全不主动，0.2=保留20%主动性，即使在不活跃时段也可能偶尔主动说话）",
        "default": 0.0
    },
    "proactive_time_max_factor": {
        "description": "【模式2】最高概率系数限制",
        "type": "float",
        "hint": "防止主动过于频繁。建议1.5-2.5（2.0=最高提升到200%主动性，在活跃时段会比较频繁地主动发言，但不至于刷屏）",
        "default": 2.0
    },
    "proactive_time_use_smooth_curve": {
        "description": "【模式2】使用自然曲线过渡",
        "type": "bool",
        "hint": "开启后使用ease-in-out曲线模拟社交意愿的自然变化（非匀速，更符合人类行为）。强烈建议开启以获得更拟人化的主动对话效果",
        "default": true
    },
    "_humanize_mode_section_header": {
        "description": "═══════════════ 🎭 拟人增强模式 (v1.2.0新增) ═══════════════",
        "type": "string",
        "hint": "【高级功能】模拟MaiBot的拟人效果，让AI的回复判断更像真人。包含：静默状态机、历史决策记录、兴趣话题检测、动态消息阈值等功能",
        "default": "--- 拟人增强模式配置区 ---"
    },
    "enable_humanize_mode": {
        "description": "🎭 启用拟人增强模式",
        "type": "bool",
        "hint": "【总开关】开启后启用拟人增强功能，让AI的回复判断更像真人。核心功能：\n1. 静默状态机 - 连续判断不回复后进入静默，减少无效AI调用\n2. 历史决策记录 - 让AI知道自己之前的判断，保持行为一致性\n3. 兴趣话题检测 - 快速识别感兴趣的话题并提高回复概率\n4. 动态消息阈值 - 根据历史判断动态调整触发频率",
        "default": false
    },
    "humanize_silent_mode_threshold": {
        "description": "静默模式触发阈值",
        "type": "int",
        "hint": "连续N次读空气AI判断'不回复'后，进入静默模式。\n\n【静默模式特点】：完全跳过读空气AI调用，大幅节省API消耗\n【退出条件】（满足任一即退出）：\n  1. 被@或叫名字\n  2. 超过最长持续时间\n  3. 累积消息超过最大消息数\n  4. 检测到兴趣话题关键词\n\n建议3-5次。注意：此功能与'动态消息阈值'是不同机制，静默模式针对的是AI决策阶段",
        "default": 3
    },
    "humanize_silent_max_duration": {
        "description": "静默模式最长持续时间(秒)",
        "type": "int",
        "hint": "静默模式最多持续多长时间后自动退出。建议300-900秒(5-15分钟)。防止AI长时间不参与对话",
        "default": 600
    },
    "humanize_silent_max_messages": {
        "description": "静默模式最大消息数",
        "type": "int",
        "hint": "静默模式下累积多少条新消息后自动退出并重新判断。建议5-15条。防止错过重要话题",
        "default": 8
    },
    "humanize_enable_dynamic_threshold": {
        "description": "启用动态消息阈值",
        "type": "bool",
        "hint": "开启后，根据连续不回复次数动态调整触发阈值。连续不回复越多，需要积累更多消息才会触发概率判断。\n\n【处理顺序说明】：\n1️⃣ 动态消息阈值（本功能）- 控制是否触发概率判断\n2️⃣ 概率判断 - 随机决定是否进入AI决策\n3️⃣ 静默模式检查 - 在AI决策前额外过滤\n4️⃣ 读空气AI判断 - 最终决定是否回复\n\n本功能与静默模式是两个独立机制：动态阈值减少概率判断次数，静默模式减少AI调用次数",
        "default": true
    },
    "humanize_base_message_threshold": {
        "description": "基础消息阈值",
        "type": "int",
        "hint": "正常情况下（连续不回复0-2次），积累多少条消息后触发一次概率判断。\n⚠️ 设为1时表示每条消息都触发概率判断（无累积效果）\n建议2-3条可获得较好的节省效果。值越大，AI调用越少，但可能错过重要消息",
        "default": 1
    },
    "humanize_max_message_threshold": {
        "description": "最大消息阈值",
        "type": "int",
        "hint": "连续不回复5次以上后，最多需要积累多少条消息才触发概率判断。建议2-5条。此时AI对话题兴趣较低，减少无效调用",
        "default": 3
    },
    "humanize_include_decision_history": {
        "description": "在提示词中包含历史决策",
        "type": "bool",
        "hint": "开启后，读空气AI能看到自己之前的判断记录，从而保持行为一致性。例如：如果之前判断某话题不感兴趣，后续类似话题也倾向于不回复",
        "default": true
    },
    "humanize_interest_keywords": {
        "description": "兴趣话题关键词列表",
        "type": "list",
        "hint": "【重要】填写AI感兴趣的话题关键词。当消息包含这些关键词时：1.静默模式会自动退出 2.概率判断时会额外提升概率（叠加到当前概率上）。建议填写：技术词汇、游戏名、动漫名、爱好相关词等。示例：[\"编程\",\"Python\",\"原神\",\"动漫\"]",
        "default": []
    },
    "humanize_interest_boost_probability": {
        "description": "兴趣话题概率提升值",
        "type": "float",
        "hint": "检测到兴趣话题时，在概率判断阶段额外增加的概率值（叠加到当前概率上）。范围0-1，建议0.2-0.5。例如当前概率为0.3，此值设为0.3，则兴趣话题消息实际概率为0.6",
        "default": 0.3
    },
    "_content_filter_section_header": {
        "description": "═══════════════ 🧹 AI回复内容过滤 (v1.2.0新增) ═══════════════",
        "type": "string",
        "hint": "【高级功能】用于过滤AI回复中其他插件注入的提示词或额外输出内容。分为输出过滤（控制发送给用户的内容）和保存过滤（控制保存到历史记录的内容）两套独立配置",
        "default": "--- AI回复内容过滤配置区 ---"
    },
    "enable_output_content_filter": {
        "description": "🧹 启用输出内容过滤",
        "type": "bool",
        "hint": "【输出过滤开关】开启后，AI回复在发送给用户之前会根据配置的规则进行内容过滤。用于清理其他插件注入的提示词或不想让用户看到的内容。此过滤不影响保存到历史记录的内容",
        "default": false
    },
    "output_content_filter_rules": {
        "description": "输出内容过滤规则列表",
        "type": "list",
        "hint": "【输出过滤规则】配置需要从AI输出中过滤的内容规则。支持三种格式：\n\n1️⃣ 范围过滤: <开始标记>*<结束标记>\n   示例: <思考>*</思考> - 过滤<思考>和</思考>之间的所有内容（包含标记）\n\n2️⃣ 头部过滤: {{>*<结束标记>\n   示例: {{>*[回复开始] - 从消息开头到[回复开始]（包含）全部过滤\n\n3️⃣ 尾部过滤: <开始标记>*>}}\n   示例: [系统提示]*>}} - 从[系统提示]到消息末尾全部过滤\n\n⚠️ 注意：{{> 表示消息开头，>}} 表示消息末尾，这是特殊标记符号\n\n📝 下方default中已提供常见示例，可直接使用或按需修改",
        "default": ["<思考>*</思考>", "<think>*</think>", "<thinking>*</thinking>", "{{>*[正式回复]", "[内部提示]*>}}"]
    },
    "enable_save_content_filter": {
        "description": "🧹 启用保存内容过滤",
        "type": "bool",
        "hint": "【保存过滤开关】开启后，AI回复在保存到历史记录之前会根据配置的规则进行内容过滤。用于清理不想保存到历史记录的内容。此过滤不影响发送给用户的内容",
        "default": false
    },
    "save_content_filter_rules": {
        "description": "保存内容过滤规则列表",
        "type": "list",
        "hint": "【保存过滤规则】配置需要从AI保存内容中过滤的规则。格式与输出过滤规则相同：\n\n1️⃣ 范围过滤: <开始标记>*<结束标记>\n2️⃣ 头部过滤: {{>*<结束标记>\n3️⃣ 尾部过滤: <开始标记>*>}}\n\n💡 使用场景示例：\n- 输出时保留思考过程，但保存时过滤：只在save规则中配置\n- 输出时过滤思考过程，但保存时保留：只在output规则中配置\n- 两者都过滤：在两套规则中都配置\n\n📝 下方default中已提供常见示例，可直接使用或按需修改",
        "default": ["<analysis>*</analysis>", "<reasoning>*</reasoning>", "{{>*[开始回复]", "[系统备注]*>}}"]
    },
    "_duplicate_filter_section_header": {
        "description": "═══════════════ 🔄 AI重复消息拦截配置 ═══════════════",
        "type": "string",
        "hint": "以下配置用于控制AI重复消息检测和拦截功能，防止AI发送与最近发过的消息完全相同的内容",
        "default": "--- AI重复消息拦截配置区 ---"
    },
    "enable_duplicate_filter": {
        "description": "🔄 启用AI重复消息拦截",
        "type": "bool",
        "hint": "【总开关】开启后，AI在发送消息前会检查是否与最近发过的消息重复。如果检测到重复，将拦截发送。此功能同时对普通回复和主动对话生效。关闭后不进行任何重复检测",
        "default": true
    },
    "duplicate_filter_check_count": {
        "description": "🔢 重复检测参考消息条数",
        "type": "int",
        "hint": "检测重复时参考最近多少条AI发送的消息。例如设置为3，则只检查最近3条AI回复是否与当前要发送的消息重复。建议1-10条，默认5条。设置为1表示只检查上一条AI回复",
        "default": 5
    },
    "enable_duplicate_time_limit": {
        "description": "⏰ 启用重复检测时效性判断",
        "type": "bool",
        "hint": "开启后，只有在设定的时间范围内发送的消息才会被用于重复检测。超过时效的消息即使内容完全相同也不会被判定为重复。这允许AI在较长时间后重复发送相同内容（例如常用的问候语）",
        "default": true
    },
    "duplicate_filter_time_limit": {
        "description": "⏱️ 重复检测时效(秒)",
        "type": "int",
        "hint": "【需启用时效性判断】消息发送后多长时间内会被用于重复检测。超过此时间的消息不参与重复判断。默认1800秒(30分钟)。建议300-7200秒。例如设置600秒，则10分钟前发送的消息不会被用于重复检测",
        "default": 1800
    },
    "enable_private_chat": {
        "description": "🔘 启用私信功能",
        "type": "bool",
        "hint": "【总开关】开启后启用私信回复功能。私信模式下每条消息都会回复（无概率筛选和读空气AI），支持消息聚合",
        "default": false
    },
    "_private_chat_section_header": {
        "description": "═══════════════ 📱 私信功能配置 ═══════════════",
        "type": "string",
        "hint": "以下是私信功能的独立配置，与群聊配置互不影响。需要先开启上方的「启用私信功能」总开关",
        "default": "--- 私信功能配置区 ---"
    }
}

